(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{"/1E3":function(e){e.exports=JSON.parse('{"classes":["com.google.gson.Gson","java.util.ArrayList","java.util.List","java.lang.StringBuilder","java.util.Dictionary","java.io.BufferedReader","java.io.FileOutputStream","java.nio.charset.Charset","java.text.SimpleDateFormat","java.awt.Point","java.sql.Connection","java.io.OutputStreamWriter","java.util.concurrent.ScheduledThreadPoolExecutor","org.joda.time.LocalDateTime","org.joda.time.DateTime"]}')},H5FF:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return J}));var n,a,o,i,s,c,u,l,p,f,h,d,m=r("o0o1"),y=r.n(m),b=r("HaE+"),g=r("1OyB"),v=r("vuIU"),k=r("Ji7U"),w=r("md7G"),O=r("foSv"),j=r("q1tI"),x=r.n(j),C=r("a3ss"),M=r("Y65e"),E=(r("+JCI"),r("2vnA")),q=r("xucD"),S=r("HMzw"),Q=(n=function(){function e(t){Object(g.a)(this,e),Object(C.a)(this,"doc",a,this),this.request=Object(S.a)(t)}return Object(v.a)(e,[{key:"runQuery",value:function(){var e=Object(b.a)(y.a.mark((function e(t){var r,n,a,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.mainCriterion)){e.next=7;break}return a="fullClassName=".concat(encodeURIComponent(r.fullClassName)).concat(r.methodName?"&methodName=".concat(encodeURIComponent(r.methodName)):""),e.next=5,this.request.get("/web/assistant/docs/codeElements?".concat(a));case 5:200===(o=e.sent).status&&(n=o.data);case 7:this.doc=n;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(e){this.doc=e.doc}},{key:"raw",get:function(){return{doc:this.doc}}}]),e}(),a=Object(M.a)(n.prototype,"doc",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(M.a)(n.prototype,"raw",[E.f],Object.getOwnPropertyDescriptor(n.prototype,"raw"),n.prototype),n),I=(o=function(){function e(t){Object(g.a)(this,e),Object(C.a)(this,"classMembers",i,this),this.request=Object(S.a)(t)}return Object(v.a)(e,[{key:"runQuery",value:function(){var e=Object(b.a)(y.a.mark((function e(t){var r,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.mainCriterion)||"package"===r.type){e.next=6;break}return e.next=4,this.request.get("/api/assistant/class/".concat(encodeURIComponent(r.fullClassName),"/methods?limit=20"));case 4:200===(a=e.sent).status&&(n=a.data);case 6:this.classMembers=n;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(e){this.classMembers=e.classMembers}},{key:"raw",get:function(){return{classMembers:this.classMembers}}}]),e}(),i=Object(M.a)(o.prototype,"classMembers",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(M.a)(o.prototype,"raw",[E.f],Object.getOwnPropertyDescriptor(o.prototype,"raw"),o.prototype),o),N=(s=function(){function e(t){Object(g.a)(this,e),Object(C.a)(this,"popularClasses",c,this),this.request=Object(S.a)(t)}return Object(v.a)(e,[{key:"runQuery",value:function(){var e=Object(b.a)(y.a.mark((function e(t){var r,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.mainCriterion)||"package"===r.type){e.next=6;break}return e.next=4,this.request.get("/api/assistant/class/".concat(encodeURIComponent(r.fullClassName),"/popular-items?limit=10"));case 4:200===(a=e.sent).status&&(n=a.data);case 6:this.popularClasses=n;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(e){this.popularClasses=e.popularClasses}},{key:"raw",get:function(){return{popularClasses:this.popularClasses}}}]),e}(),c=Object(M.a)(s.prototype,"popularClasses",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(M.a)(s.prototype,"raw",[E.f],Object.getOwnPropertyDescriptor(s.prototype,"raw"),s.prototype),s),P=(u=function(){function e(t){Object(g.a)(this,e),Object(C.a)(this,"packageMembers",l,this),this.request=Object(S.a)(t)}return Object(v.a)(e,[{key:"runQuery",value:function(){var e=Object(b.a)(y.a.mark((function e(t){var r,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.mainCriterion)||"package"!==r.type){e.next=6;break}return e.next=4,this.request.get("/api/assistant/package/".concat(r.packageName,"/classes?limit=20"));case 4:200===(a=e.sent).status&&(n=a.data);case 6:this.packageMembers=n;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(e){this.packageMembers=e.packageMembers}},{key:"raw",get:function(){return{packageMembers:this.packageMembers}}}]),e}(),l=Object(M.a)(u.prototype,"packageMembers",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(M.a)(u.prototype,"raw",[E.f],Object.getOwnPropertyDescriptor(u.prototype,"raw"),u.prototype),u),D=r("boIB"),L=r("uj3Z"),R=r("32ec"),_=r("lGeG"),K=r("/1E3"),T=r("LvDl");function z(e,t){var r=new Set;return e.filter((function(e){var n=e[t];return!r.has(n)&&r.add(n)}))}var H=(p=function(){function e(t){Object(g.a)(this,e),Object(C.a)(this,"loading",f,this),Object(C.a)(this,"isPrivate",h,this),Object(C.a)(this,"completionsCount",d,this),this.req=t,this.request=Object(S.a)(t),this.doc=new Q(t),this.classMembers=new I(t),this.packageMembers=new P(t),this.popularClasses=new N(t),this.backend=new D.a(t),this.stories=new L.a,this.completions=[],this.fallbackTypes=T.get(K,"classes",[])}return Object(v.a)(e,[{key:"load",value:function(e){this.loading=e.loading,this.isPrivate=e.isPrivate,this.completionsCount=e.completionsCount,this.completions=e.completions,this.fallbackTypes=e.fallbackTypes,this.doc.load(e.doc),this.classMembers.load(e.classMembers),this.popularClasses.load(e.popularClasses),this.packageMembers.load(e.packageMembers),this.stories.load(e.stories)}},{key:"runQuery",value:function(){var e=Object(b.a)(y.a.mark((function e(t){var r,n,a,o,i,s=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,t.meta.showSuggestions=!1,t.meta.allowEmpty=!0,e.prev=3,this.query=t,r=R.a.getCookie(this.req,"codota.isPrivate"),this.isPrivate=void 0===r?void 0:"true"===r,o=function(e,t){e?a=e:n=t},e.next=10,this._runQuery(t,null,o);case 10:if(!n||!n.useAlternative){e.next=17;break}return i=n.action.alternatives.map((function(e){return q.a.createFromByteCodeName(e.key)})),(t=q.c.create().addCriteria(i)).meta.allowEmpty=!0,this.query=t,e.next=17,this._runQuery(t,n,o);case 17:_.a.sync("storiesStore.processQueryResult",(function(){return s.stories.processQueryResult(n,a)}));case 18:return e.prev=18,this.loading=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,,18,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_runCompletionsQuery",value:function(){var e=Object(b.a)(y.a.mark((function e(t){var r,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.completionsCount=void 0,!t){e.next=8;break}if(!(r=t.mainCriterion)){e.next=8;break}return e.next=6,this.backend.requestCompletions(r.fullNiceName);case 6:(n=e.sent)&&(this.completionsCount=9*Math.max(n.completions[0]&&n.completions[0].value.artifactCount||155,35));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_positiveMod",value:function(e,t){return(e%t+t)%t}},{key:"_makeCompletionFallback",value:function(e){if(0!==T.get(e,"criteria.length",0)&&!T.isEmpty(this.fallbackTypes)){var t=e.criteria.filter((function(e){return e.key&&"free"!==e.value})).map((function(e){return e.methodName?e.className:e.niceName})).sort().join(","),r=Array.from(t).reduce((function(e,t){return Math.imul(31,e)+t.charCodeAt(0)|0}),0),n=this._positiveMod(r,this.fallbackTypes.length);return q.a.createFromFullClassName(this.fallbackTypes[n])}}},{key:"_runOneLocalCompletionQuery",value:function(){var e=Object(b.a)(y.a.mark((function e(t,r,n){var a,o,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.key||"free"===r.value){e.next=7;break}return a=r.methodName?r.className:r.niceName,e.next=5,this.request.post("/api/assistant/localcompletion",{qualifiedClassName:r.fullClassName},{timeout:this.req?2e3:5e3});case 5:200===(o=e.sent).status&&o.data&&o.data.completions?(i={name:a,data:o.data.completions},!T.isEmpty(i.data)&&n.push(i),n&&n.length>0&&(n.sort().filter((function(e,t,r){return!t||e!==r[t-1]})),n.sort((function(e,r){var n=e.name,a=r.name;return t.criteria.findIndex((function(e){return e.niceName===n}))>t.criteria.findIndex((function(e){return e.niceName===a}))?1:-1})),n.map((function(e){e.data.sort((function(e,t){return t.result&&t.result.completions.length-e.result&&e.result.completions.length}))}))),this.completions=T.union(this.completions,n.length>0?z(n,"name"):[])):console.log("error: ",o);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_runLocalCompletionsQuery",value:function(){var e=Object(b.a)(y.a.mark((function e(t){var r,n,a=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.criteria&&t.criteria.length>0)){e.next=18;break}return this.completions=[],r=[],e.prev=3,e.next=6,Promise.all(t.criteria.map((function(e){return a._runOneLocalCompletionQuery(t,e,r)})));case 6:if(!T.isEmpty(this.completions)){e.next=13;break}if(!(n=this._makeCompletionFallback(t))){e.next=13;break}return r=[],e.next=12,this._runOneLocalCompletionQuery(t,n,r);case 12:T.isEmpty(this.completions)||(this.completions[0].random=!0,this.completions[0].fullClassName=n.fullClassName);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_runQuery",value:function(){var e=Object(b.a)(y.a.mark((function e(t,r,n){var a=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([_.a.async("docStore.runQuery",Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.doc.runQuery(t));case 1:case"end":return e.stop()}}),e)})))),_.a.async("classMembersStore.runQuery",Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.classMembers.runQuery(t));case 1:case"end":return e.stop()}}),e)})))),_.a.async("popularClassesStore.runQuery",Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.popularClasses.runQuery(t));case 1:case"end":return e.stop()}}),e)})))),_.a.async("packageMembersStore.runQuery",Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.packageMembers.runQuery(t));case 1:case"end":return e.stop()}}),e)})))),_.a.async("resultsStore._runStoriesQuery",Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a._runStoriesQuery(t,r,n));case 1:case"end":return e.stop()}}),e)})))),_.a.async("resultsStore._runCompletionsQuery",Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a._runCompletionsQuery(t));case 1:case"end":return e.stop()}}),e)})))),_.a.async("resultsStore._runLocalCompletionsQuery",Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a._runLocalCompletionsQuery(t));case 1:case"end":return e.stop()}}),e)}))))]);case 2:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_runStoriesQuery",value:function(){var e=Object(b.a)(y.a.mark((function e(t,r,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.backend.runQuery(t,r);case 3:a=e.sent,n(null,a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"query",get:function(){return this.stories.query},set:function(e){this.stories.query=e}},{key:"raw",get:function(){return{loading:this.loading,isPrivate:this.isPrivate,completionsCount:this.completionsCount,doc:this.doc.raw,classMembers:this.classMembers.raw,popularClasses:this.popularClasses.raw,packageMembers:this.packageMembers.raw,stories:this.stories.raw,completions:this.completions}}}]),e}(),f=Object(M.a)(p.prototype,"loading",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=Object(M.a)(p.prototype,"isPrivate",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=Object(M.a)(p.prototype,"completionsCount",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(M.a)(p.prototype,"query",[E.f],Object.getOwnPropertyDescriptor(p.prototype,"query"),p.prototype),Object(M.a)(p.prototype,"load",[E.d],Object.getOwnPropertyDescriptor(p.prototype,"load"),p.prototype),Object(M.a)(p.prototype,"raw",[E.f],Object.getOwnPropertyDescriptor(p.prototype,"raw"),p.prototype),p);function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(O.a)(e);if(t){var a=Object(O.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(w.a)(this,r)}}var J=function(e){Object(k.a)(r,e);var t=B(r);function r(e){var n;return Object(g.a)(this,r),(n=t.call(this,e)).resultsStore=new H,n.resultsStore.load(e.rawResults),n}return Object(v.a)(r,[{key:"componentDidUpdate",value:function(e){e.rawResults!==this.props.rawResults&&this.resultsStore.load(this.props.rawResults)}}]),r}(x.a.Component);J.getInitialPropsSync=function(e,t){var r=t.req,n=t.query;return _.a.sync("ResultsPage.getInitialPropsSync",(function(){var t=new H(r);return n.forceOriginal&&(e.meta.originalQuery=!0),t.query=e,{rawResults:t.raw}}))},J.getInitialProps=function(){var e=Object(b.a)(y.a.mark((function e(t,r){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.req,a=r.res,e.abrupt("return",_.a.async("ResultsPage.getInitialProps",Object(b.a)(y.a.mark((function e(){var r,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new H(n),e.next=3,r.runQuery(t);case 3:return o=r.stories.result,!a||o&&0!=o.stories.length||1!=t.criteria.length||a.setHeader("X-Robots-Tag","noindex, nofollow"),e.abrupt("return",{rawResults:r.raw});case 6:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},uj3Z:function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var n=r("a3ss"),a=r("1OyB"),o=r("vuIU"),i=r("Y65e"),s=(r("+JCI"),r("2vnA")),c=r("LvDl"),u=r("KQm4"),l=r("JuRm"),p=r("LvDl"),f=function(e,t,r){t.length>0&&e.push({kind:"plain",code:t,col:r})},h=function(e,t){var r=p.groupBy(t,(function(e){return e.location.line}));e.highlightedLineNumbers=[];var n,a=[],o=-2;e.forEach((function(e){e.originalCode=e.code,e.code=d(e.code),e.code.trim().length>0&&(o=-2==o?Math.max(0,e.code.search(/\S|$/)):Math.min(o,e.code.search(/\S|$/)))}));var i=[];e.forEach((function(e){e.code=m(e.code,o);var t=r[e.number];if(t){e.must=t.some((function(e){return e.kind&&("must"===e.kind||e.kind.includes("focal"))}));var s=p.minBy(t.filter((function(e){return e.kind&&("must"===e.kind||e.kind.includes("focal"))})),(function(e){return e.location.col}));s&&(n=n&&n.location.col<s.location.col?n:s);var c=function(e,t,r){var n,a=e,o=t.sort((function(e,t){var r=t.location.col-e.location.col;return 0===r&&e.location.length===t.location.length&&(r="text"===e.kind?1:-1),r})),i=[],s=[];return o.forEach((function(t,o){var c=t.location,u=c.col,l=c.length,h=u+l,d=p.last(i);d&&d.col===u&&d.code.length===l&&"text"===t.kind&&(d.isText=!0);var m=h;p.remove(s,(function(e){return e.cEnd<h})).forEach((function(r){var n=e.substr(r.cEnd,m-r.cEnd),a=i.find((function(e){return"plain"===e.kind&&e.col===r.cEnd}));a&&(a.code=a.code.substr(n.length),a.col+=n.length,i.push({kind:t.kind,predictionIndex:t.predictionIndex||-1,elementId:t.elementId,methodKey:t.methodKey,code:n,type:t.type,col:r.cEnd})),m=r.cStart}));var y=a.substr(h);f(i,y,h);var b,g=a.substr(u,l);i.push({kind:t.kind,predictionIndex:t.predictionIndex||-1,elementId:t.elementId,methodKey:t.methodKey,fullNiceName:p.get(t,"prediction.fullNiceName",void 0),code:g,type:t.type,col:u}),s.push({cStart:u,cEnd:h}),a=a.substr(0,u),t.predictionIndex?b=t.prediction.key:"text"===t.kind&&(b=c.text),b&&(void 0===r[b]&&(r[b]=0),r[b]++,n=n?Math.min(n,r[b]):r[b])})),f(i,a,0),{lineParts:i.sort((function(e,t){return e.col-t.col})),considerHide:n&&n>3}}(e.originalCode,t,i);e.parts=c.lineParts,e.hide=c.considerHide&&!e.must,e.parts[0].originalCode=e.parts[0].code,e.parts[0].code=m(d(e.parts[0].code),o),p.some(t,(function(e){return"token"!==e.kind}))&&a.push(e),1==t.length&&"comment"==t[0].type&&(e.comment=!0)}else 0==e.code.trim().search(/^\/\/|^\/\*|^\*/)&&(e.comment=!0)}));var s=0;if(e.length>0&&n){var c=n.location.line-e[0].number;s=e[c].originalCode.length-e[c].code.length}return{codeLines:e,hlLines:a,leftMostMust:n?{column:n.location.col-s,length:n.location.length}:{}}},d=function(e){return e.split("\t").join("    ").replace(/^\s+/,(function(e){return e.replace(/\s\s/g," ")}))},m=function(e,t){return e.substr(t)};var y,b,g,v,k,w,O,j=function(e,t,r){var n=e.calls,a=e.code;n=p.uniqBy(n,JSON.stringify);var o=a.full.split(/\r?\n/).map((function(e,t){return{number:a.startLine+t,code:e+"\n"}}));e.highlight=e.highlight||{code:[],keyText:[]},e.highlight.code.forEach((function(e){return e.location.line+=a.startLine}));var i=e.calls.filter((function(e){return"kind"in e})).concat(e.highlight.code).concat(p.flatMap(e.tokens,(function(e){return e.locations.map((function(t){return{kind:e.kind,type:e.type,content:e.contents,location:t}}))})));!function(e,t){try{e.forEach((function(e){t.forEach((function(t){try{if(t.location&&t.methodKey&&t.location.line===e.number&&("undefined"===typeof t.location.col||t.location.col<0)){var r=t.methodKey.split(";");if(r.length>1){var n=r[1].split("(")[0];"<init>"===n&&(n=p.last(r[0].split("/")));var a=e.code.indexOf(n);-1!==a&&(t.location.col=a,t.location.length=n.length)}}}catch(o){console.error(o)}}))}))}catch(r){console.error(r)}}(o,i),0===e.highlight.code.length&&function(e,t,r){(e.criteria||[]).filter((function(e){return"free"===e.type})).forEach((function(e){var n=e.key;t.forEach((function(e){for(var t=e.code.toLowerCase(),a=n.toLowerCase(),o=t.indexOf(a);-1!==o;)r.push({kind:"text",location:{col:o,length:n.length,line:e.number,text:n}}),o=t.indexOf(a,o+1)}))}))}(r,o,i);var s=h(o,i.filter((function(e){return e.location&&"undefined"!==typeof e.location.col&&e.location.col>=0})));!function(e,t){e.codeLines.forEach((function(e){e.lineHighlight={type:"none"},t.forEach((function(t){if(!(t.location&&t.location.col&&t.location.col>=0)&&t.location.line===e.number)switch(t.kind){case"prediction":"none"===e.lineHighlight.type&&(e.lineHighlight={type:"prediction",predictionIndex:t.predictionIndex,methodKey:t.methodKey,code:e.code,elementId:t.elementId});break;case"focal":case"context":e.lineHighlight={type:t.kind,methodKey:t.methodKey,code:e.code,elementId:t.elementId};break;case"must":case"focal-related":case"context-related":if("focal"!==e.lineHighlight.type){e.lineHighlight={type:t.kind,methodKey:t.methodKey,code:e.code,elementId:t.elementId};break}}}))}))}(s,i);var c=function(e){var t=e.codeLines,r=e.hlLines,n=l.a.fullCodeMaxLinesOnStart();if(t.filter((function(e){return e.code.length>0})).length<=n)return[];if(0==r.length)return t.slice(0,n);var a=new Set(r.filter((function(e){return e.must})).map((function(e){return e.number}))),o=new Set(r.map((function(e){return e.number}))),i=[-2,-1,0,1,2],s=r.filter((function(e){return!e.hide})).map((function(e){return i.map((function(t){return e.number+t}))})).reduce((function(e,t){return e.concat(t)}),[]),c=new Set(s),f=t[0].number,h=p.last(t).number;c.has(f+1)&&c.add(f),c.has(f-1)&&c.delete(f-1),c.has(h+1)&&c.delete(h+1);var d=t.map((function(e){var t=1==e.comment;return 0!=r.length&&(t|=e.code.trim().length<2),{number:e.number,ignore:t}})).sort((function(e,t){return e.number-t.number}));if(d.forEach((function(e,t){if(!e.ignore&&c.has(e.number)&&!o.has(e.number)){var r=!1;t>0&&(r=d[t-1].ignore),t<d.length-1&&d[t+1].ignore,r&&(e.ignore=1)}e.ignore&&c.delete(e.number)})),c.size>n){var m=r.filter((function(e){return!e.hide})).map((function(e){return e.number}));r.filter((function(e){return e.hide})).forEach((function(e){if(c.has(e.number)){var t=-1==m.indexOf(e.number-1),r=-1==m.indexOf(e.number+1);(t||r)&&(c.delete(e.number),t&&c.delete(e.number-1),r&&c.delete(e.number+1))}}))}var y,b=Object(u.a)(c).sort((function(e,t){return e-t})),g=[],v=p.last(b)===h?0:1;b.forEach((function(e){y!==e-1&&(g.push({start:e,length:0}),e!=f&&v++),p.last(g).length++,a.has(e)&&(p.last(g).must=!0),y=e}));var k=c;if(k.size+v>n){var w=function(e,t){return e.concat(p.range(t.start,t.start+t.length))},O=[],j=p.partition(g,(function(e){return e.must}));j[0].forEach((function(e){return O=w(O,e)}));var x=Math.max(j[0].length-1,0)+(f===O[0]?0:1)+(h===p.last(O)?0:1);O.length+x<n&&p.sortBy(j[1],"length").forEach((function(e){var t=e.start===f||e.start+e.length-1===h?0:1;O.length+x+t+e.length<=n&&(O=w(O,e),x+=t)})),k=new Set(O)}var C=-2,M=0,E=null,q=t.map((function(e){if(k.has(e.number)&&M<n){E=null,M++;var t=(e.parts?e.parts[0].code:e.code).search(/\S|$/);return C=-2===C?Math.max(0,t):Math.min(C,t),e}return null!==E?(E.linesHidden++,E.originalCode+=e.code,null):(E={filler:!0,originalCode:e.code,linesHidden:1},M++,E)})).filter((function(e){return null!==e}));return e.leftMostMust.column&&(e.leftMostMust.column-=-2===C?0:4*C),q.map((function(e){var t=JSON.parse(JSON.stringify(e));return t.parts?t.parts[0].code=t.parts[0].code.substr(C):"filler"in t||(t.code=t.code.substr(C)),t}))}(s),d=function(e){var t=[];if(p.isEmpty(e.highlight.keyText))return t;var r=e.title;if(!r){var n=e.containerKey.match(/([^\/]*);([^\(]*)\(/);r=n.length>=3?n[1]+"."+n[2]:e.containerKey,r+="("+(null!==e.containerKey.match(/\(.+\)/)?"...":"")+")"}return e.highlight.keyText.sort((function(e,t){return t.location.col-e.location.col})).forEach((function(e){var n=e.location,a=n.col,o=n.length,i=a+o,s=r.substr(i);f(t,s,i);var c=r.substr(a,o);t.push({kind:"text",code:c,col:a}),r=r.substr(0,a)})),f(t,r,0),t.reverse()}(e);return a.highlightedLineNumbers=[],s.hlLines.forEach((function(e){return a.highlightedLineNumbers.push(e.number)})),{compressedMini:c,fullMini:s.codeLines,leftMostMust:s.leftMostMust,titleParts:d}},x=r("xucD"),C=(y=s.m.ref,b=s.m.ref,g=s.m.ref,v=function(){function e(){Object(a.a)(this,e),Object(n.a)(this,"query",k,this),Object(n.a)(this,"result",w,this),Object(n.a)(this,"queryError",O,this)}return Object(o.a)(e,[{key:"processQueryResult",value:function(e,t){var r=this;if(this.queryError=t?t.toString():void 0,e){var n=0,a=0;e.stories.forEach((function(t){t.code.highlighted={compressedMini:[],fullMini:[],leftMostMust:1,titleParts:[]},t.code.highlighted=j(t,e.predictions,r.query),t.originalIndex=t.private?n++:a++}));var o=Object(c.get)(e,"inspectionError.action.story");if(o){var i=e.stories.findIndex((function(e){return e._id===o._id}));-1!==i?e.inspectionError.action.story=e.stories[i]:(o.code.highlighted={compressedMini:[],fullMini:[],leftMostMust:1,titleParts:[]},o.code.highlighted=j(o,e.predictions,this.query),o.originalIndex=o.private?n++:a++)}(e.manualStories||[]).forEach((function(t){t.code.highlighted={compressedMini:[],fullMini:[],leftMostMust:1,titleParts:[]},t.code.highlighted=j(t,e.predictions,r.query),t.originalIndex=t.private?n++:a++})),e.inspectionError&&e.inspectionError.originalQuery&&(e.inspectionError.originalQuery=e.inspectionError.originalQuery.raw),e.id=(new Date).getTime()}this.result=e}},{key:"load",value:function(e){this.query=this.result=this.queryError=void 0,this.query=new x.c(e.query),this.result=e.result,this.queryError=e.queryError}},{key:"queryData",get:function(){var e=this.query,t=this.result;if(!e||!t)return null;var r={query:e.raw};r.manualCount=_.get(t,"manualStories.length",0),r.resultsCount=t.stories.length,r.predictionsCount=t.predictions?t.predictions.length:0,r.showSuggestions=e.meta.showSuggestions||!1;var n=Object(c.take)(t.stories,3);return r.top3Zscore=Object(c.max)(Object(c.map)(n,(function(e){return e.meta.zscore}))),r.top3Rank=Object(c.max)(Object(c.map)(n,(function(e){return e.computed.rank}))),r}},{key:"raw",get:function(){return{query:this.query.raw,result:this.result,queryError:this.queryError}}}]),e}(),k=Object(i.a)(v.prototype,"query",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=Object(i.a)(v.prototype,"result",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=Object(i.a)(v.prototype,"queryError",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(i.a)(v.prototype,"processQueryResult",[s.d],Object.getOwnPropertyDescriptor(v.prototype,"processQueryResult"),v.prototype),Object(i.a)(v.prototype,"queryData",[s.f],Object.getOwnPropertyDescriptor(v.prototype,"queryData"),v.prototype),Object(i.a)(v.prototype,"load",[s.d],Object.getOwnPropertyDescriptor(v.prototype,"load"),v.prototype),Object(i.a)(v.prototype,"raw",[s.f],Object.getOwnPropertyDescriptor(v.prototype,"raw"),v.prototype),v)}}]);